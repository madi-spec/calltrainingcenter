@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Default brand colors - will be overridden dynamically by company branding */
  --brand-primary: #3b82f6;
  --brand-primary-rgb: 59, 130, 246;
  --brand-secondary: #6b7280;
  --brand-accent: #10b981;

  /* Legacy brand colors */
  --color-brand: var(--brand-primary);
  --color-brand-light: #3b82f6;
  --color-brand-dark: #1d4ed8;

  --color-primary-50: #eff6ff;
  --color-primary-100: #dbeafe;
  --color-primary-200: #bfdbfe;
  --color-primary-300: #93c5fd;
  --color-primary-400: #60a5fa;
  --color-primary-500: var(--brand-primary);
  --color-primary-600: var(--brand-primary);
  --color-primary-700: #1d4ed8;
  --color-primary-800: #1e40af;
  --color-primary-900: #1e3a8a;

  /* Dark mode surface colors (default) */
  --color-surface: #1f2937;
  --color-surface-light: #374151;
  --color-surface-dark: #111827;

  /* Theme colors - dark mode defaults */
  --bg-primary: #111827;
  --bg-secondary: #1f2937;
  --bg-tertiary: #374151;
  --text-primary: #f9fafb;
  --text-secondary: #d1d5db;
  --text-tertiary: #9ca3af;
  --border-color: #374151;
  --border-color-light: #4b5563;
}

/* Light mode overrides */
.light {
  --color-surface: #ffffff;
  --color-surface-light: #f3f4f6;
  --color-surface-dark: #e5e7eb;

  --bg-primary: #ffffff;
  --bg-secondary: #f9fafb;
  --bg-tertiary: #f3f4f6;
  --text-primary: #111827;
  --text-secondary: #374151;
  --text-tertiary: #6b7280;
  --border-color: #e5e7eb;
  --border-color-light: #d1d5db;
}

@layer base {
  html {
    scroll-behavior: smooth;
  }

  /* Dark mode (default) */
  body {
    @apply bg-gray-900 text-gray-100;
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
  }

  /* Light mode body */
  .light body,
  body.light,
  html.light body {
    @apply bg-gray-50 text-gray-900;
  }

  /* Custom scrollbar - dark */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-gray-800;
  }

  .light ::-webkit-scrollbar-track {
    @apply bg-gray-200;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-gray-600 rounded-full;
  }

  .light ::-webkit-scrollbar-thumb {
    @apply bg-gray-400 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-500;
  }

  .light ::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-500;
  }
}

@layer components {
  /* Glassmorphism card - dark mode */
  .glass-card {
    @apply bg-gray-800/50 backdrop-blur-md border border-gray-700/50 rounded-xl;
  }

  .light .glass-card {
    @apply bg-white/70 border-gray-200/50;
  }

  .glass-card-hover {
    @apply glass-card transition-all duration-300 hover:bg-gray-800/70 hover:border-gray-600/50 hover:shadow-lg;
  }

  .light .glass-card-hover {
    @apply hover:bg-white/90 hover:border-gray-300/50;
  }

  /* Theme-aware card */
  .theme-card {
    @apply bg-gray-800 border border-gray-700 rounded-xl;
  }

  .light .theme-card {
    @apply bg-white border-gray-200 shadow-sm;
  }

  /* Theme-aware surface */
  .theme-surface {
    @apply bg-gray-900;
  }

  .light .theme-surface {
    @apply bg-gray-50;
  }

  .theme-surface-secondary {
    @apply bg-gray-800;
  }

  .light .theme-surface-secondary {
    @apply bg-white;
  }

  /* Theme-aware text */
  .theme-text {
    @apply text-gray-100;
  }

  .light .theme-text {
    @apply text-gray-900;
  }

  .theme-text-secondary {
    @apply text-gray-400;
  }

  .light .theme-text-secondary {
    @apply text-gray-600;
  }

  /* Gradient text */
  .gradient-text {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-400;
  }

  .light .gradient-text {
    @apply from-blue-600 to-purple-600;
  }

  /* Animated background gradient */
  .animated-gradient {
    background: linear-gradient(-45deg, #1e3a8a, #2563eb, #7c3aed, #1e40af);
    background-size: 400% 400%;
    animation: gradient 15s ease infinite;
  }

  /* Glow effects */
  .glow {
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
  }

  .glow-green {
    box-shadow: 0 0 20px rgba(34, 197, 94, 0.3);
  }

  .glow-red {
    box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
  }

  .glow-yellow {
    box-shadow: 0 0 20px rgba(234, 179, 8, 0.3);
  }

  /* Score ring */
  .score-ring {
    @apply relative flex items-center justify-center;
  }

  .score-ring svg {
    transform: rotate(-90deg);
  }

  /* Pulse animation for recording */
  .pulse-recording {
    animation: pulse-recording 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  @keyframes pulse-recording {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.7;
      transform: scale(1.05);
    }
  }

  /* Waveform animation */
  .waveform-bar {
    animation: waveform 1s ease-in-out infinite;
  }

  @keyframes waveform {
    0%, 100% {
      transform: scaleY(0.3);
    }
    50% {
      transform: scaleY(1);
    }
  }

  /* Difficulty badges - dark mode */
  .badge-easy {
    @apply bg-green-500/20 text-green-400 border border-green-500/30;
  }

  .badge-medium {
    @apply bg-yellow-500/20 text-yellow-400 border border-yellow-500/30;
  }

  .badge-hard {
    @apply bg-red-500/20 text-red-400 border border-red-500/30;
  }

  /* Light mode badges */
  .light .badge-easy {
    @apply bg-green-100 text-green-700 border-green-300;
  }

  .light .badge-medium {
    @apply bg-yellow-100 text-yellow-700 border-yellow-300;
  }

  .light .badge-hard {
    @apply bg-red-100 text-red-700 border-red-300;
  }

  /* Button styles */
  .btn-primary {
    @apply bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-secondary {
    @apply bg-gray-700 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .light .btn-secondary {
    @apply bg-gray-200 hover:bg-gray-300 text-gray-800;
  }

  .btn-danger {
    @apply bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-success {
    @apply bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed;
  }
}

@layer utilities {
  /* Auto-theme common gray backgrounds */
  .light .bg-gray-900 { background-color: #f9fafb !important; }
  .light .bg-gray-800 { background-color: #ffffff !important; }
  .light .bg-gray-800\/50 { background-color: rgba(255, 255, 255, 0.7) !important; }
  .light .bg-gray-800\/70 { background-color: rgba(255, 255, 255, 0.9) !important; }
  .light .bg-gray-700 { background-color: #e5e7eb !important; }
  .light .bg-gray-700\/30 { background-color: rgba(229, 231, 235, 0.5) !important; }
  .light .bg-gray-700\/50 { background-color: rgba(229, 231, 235, 0.7) !important; }
  .light .bg-gray-600 { background-color: #d1d5db !important; }

  /* Auto-theme text colors */
  .light .text-gray-100 { color: #111827 !important; }
  .light .text-gray-200 { color: #1f2937 !important; }
  .light .text-gray-300 { color: #374151 !important; }
  .light .text-gray-400 { color: #6b7280 !important; }
  .light .text-gray-500 { color: #4b5563 !important; }
  /* Note: text-gray-600 not overridden - already dark enough and conflicts with @apply */

  /* Only change text-white on gray/neutral backgrounds, not on colored ones */
  .light .bg-gray-800 > .text-white,
  .light .bg-gray-900 > .text-white {
    color: #111827 !important;
  }

  /* Fix buttons that use gray backgrounds */
  .light button.bg-gray-700,
  .light button.bg-gray-800,
  .light a.bg-gray-700,
  .light a.bg-gray-800 {
    background-color: #e5e7eb !important;
    color: #374151 !important;
  }

  .light button.bg-gray-700:hover,
  .light button.bg-gray-800:hover,
  .light a.bg-gray-700:hover,
  .light a.bg-gray-800:hover {
    background-color: #d1d5db !important;
  }

  /* Auto-theme borders */
  .light .border-gray-700 { border-color: #e5e7eb !important; }
  .light .border-gray-700\/50 { border-color: rgba(229, 231, 235, 0.5) !important; }
  .light .border-gray-600 { border-color: #d1d5db !important; }
  .light .border-gray-600\/50 { border-color: rgba(209, 213, 219, 0.5) !important; }

  /* Auto-theme inputs */
  .light input.bg-gray-700,
  .light select.bg-gray-700,
  .light textarea.bg-gray-700 {
    background-color: #ffffff !important;
    border-color: #d1d5db !important;
    color: #111827 !important;
  }

  .light input.bg-gray-800,
  .light select.bg-gray-800,
  .light textarea.bg-gray-800 {
    background-color: #f9fafb !important;
    border-color: #d1d5db !important;
    color: #111827 !important;
  }

  /* Auto-theme hovers */
  .light .hover\:bg-gray-700:hover { background-color: #e5e7eb !important; }
  .light .hover\:bg-gray-800:hover { background-color: #f3f4f6 !important; }
  .light .hover\:bg-gray-600:hover { background-color: #d1d5db !important; }
  .light .hover\:text-white:hover { color: #111827 !important; }
  .light .hover\:text-gray-100:hover { color: #111827 !important; }
  .light .hover\:border-gray-600:hover { border-color: #9ca3af !important; }
  .light .hover\:border-gray-500:hover { border-color: #6b7280 !important; }

  /* Auto-theme gradients */
  .light .from-gray-900 { --tw-gradient-from: #f9fafb; }
  .light .to-gray-800 { --tw-gradient-to: #ffffff; }

  /* Light mode dark gradient overrides */
  .light .from-purple-900\/50 { --tw-gradient-from: rgba(147, 51, 234, 0.15); }
  .light .to-blue-900\/50 { --tw-gradient-to: rgba(59, 130, 246, 0.15); }
  .light .from-purple-700 { --tw-gradient-from: #a855f7; }
  .light .to-purple-700 { --tw-gradient-to: #a855f7; }
  .light .from-primary-600 { --tw-gradient-from: #2563eb; }
  /* Note: to-purple-600 not overridden - conflicts with @apply in gradient-text */

  /* Auto-theme color backgrounds with opacity */
  .light .bg-green-500\/10 { background-color: rgba(34, 197, 94, 0.15) !important; }
  .light .bg-green-500\/20 { background-color: rgba(34, 197, 94, 0.2) !important; }
  .light .bg-yellow-500\/10 { background-color: rgba(234, 179, 8, 0.15) !important; }
  .light .bg-yellow-500\/20 { background-color: rgba(234, 179, 8, 0.2) !important; }
  .light .bg-red-500\/10 { background-color: rgba(239, 68, 68, 0.15) !important; }
  .light .bg-red-500\/20 { background-color: rgba(239, 68, 68, 0.2) !important; }
  .light .bg-blue-500\/10 { background-color: rgba(59, 130, 246, 0.15) !important; }
  .light .bg-blue-500\/20 { background-color: rgba(59, 130, 246, 0.2) !important; }
  .light .bg-purple-500\/10 { background-color: rgba(168, 85, 247, 0.15) !important; }
  .light .bg-purple-500\/20 { background-color: rgba(168, 85, 247, 0.2) !important; }
  .light .bg-primary-500\/10 { background-color: rgba(59, 130, 246, 0.15) !important; }
  .light .bg-primary-600\/10 { background-color: rgba(37, 99, 235, 0.15) !important; }

  /* Auto-theme borders with opacity */
  .light .border-green-500\/20 { border-color: rgba(34, 197, 94, 0.4) !important; }
  .light .border-green-500\/30 { border-color: rgba(34, 197, 94, 0.5) !important; }
  .light .border-yellow-500\/20 { border-color: rgba(234, 179, 8, 0.4) !important; }
  .light .border-yellow-500\/30 { border-color: rgba(234, 179, 8, 0.5) !important; }
  .light .border-red-500\/20 { border-color: rgba(239, 68, 68, 0.4) !important; }
  .light .border-red-500\/30 { border-color: rgba(239, 68, 68, 0.5) !important; }
  .light .border-blue-500\/20 { border-color: rgba(59, 130, 246, 0.4) !important; }
  .light .border-blue-500\/30 { border-color: rgba(59, 130, 246, 0.5) !important; }
  .light .border-purple-500\/20 { border-color: rgba(168, 85, 247, 0.4) !important; }
  .light .border-purple-500\/30 { border-color: rgba(168, 85, 247, 0.5) !important; }

  /* Auto-theme very light text colors (for dark backgrounds) */
  .light .text-purple-100 { color: #7c3aed !important; }
  .light .text-blue-100 { color: #2563eb !important; }
  .light .text-green-100 { color: #16a34a !important; }
  .light .text-yellow-100 { color: #ca8a04 !important; }
  .light .text-red-100 { color: #dc2626 !important; }

  /* Auto-theme medium text colors */
  .light .text-purple-400 { color: #7c3aed !important; }
  .light .text-blue-400 { color: #2563eb !important; }
  .light .text-green-400 { color: #16a34a !important; }
  .light .text-yellow-400 { color: #ca8a04 !important; }
  .light .text-red-400 { color: #dc2626 !important; }
  .light .text-primary-400 { color: #2563eb !important; }
  .light .text-primary-500 { color: #1d4ed8 !important; }

  /* Shadows for light mode */
  .light .shadow-purple-500\/25 { --tw-shadow-color: rgba(168, 85, 247, 0.15); }
  .light .shadow-blue-500\/25 { --tw-shadow-color: rgba(59, 130, 246, 0.15); }

  /* Leaderboard rank gradients */
  .light .from-yellow-500\/20 { --tw-gradient-from: rgba(234, 179, 8, 0.25); }
  .light .to-yellow-600\/10 { --tw-gradient-to: rgba(202, 138, 4, 0.15); }
  .light .from-gray-400\/20 { --tw-gradient-from: rgba(156, 163, 175, 0.25); }
  .light .to-gray-500\/10 { --tw-gradient-to: rgba(107, 114, 128, 0.15); }
  .light .from-amber-600\/20 { --tw-gradient-from: rgba(217, 119, 6, 0.25); }
  .light .to-amber-700\/10 { --tw-gradient-to: rgba(180, 83, 9, 0.15); }
  .light .border-yellow-500\/30 { border-color: rgba(234, 179, 8, 0.5) !important; }
  .light .border-gray-400\/30 { border-color: rgba(156, 163, 175, 0.5) !important; }
  .light .border-amber-600\/30 { border-color: rgba(217, 119, 6, 0.5) !important; }

  /* Keep text-white on colored backgrounds (buttons, badges, etc.) */
  .light .bg-primary-600 .text-white,
  .light .bg-blue-600 .text-white,
  .light .bg-green-600 .text-white,
  .light .bg-red-600 .text-white,
  .light .bg-purple-600 .text-white,
  .light .bg-yellow-600 .text-white,
  .light [class*="bg-gradient"] .text-white {
    color: #ffffff !important;
  }

  /* Auto-theme placeholders */
  .light ::placeholder { color: #9ca3af; }

  /* Auto-theme focus states */
  .light .focus\:ring-primary-500:focus {
    --tw-ring-color: rgba(37, 99, 235, 0.5) !important;
  }
  .light .focus\:border-primary-500:focus {
    border-color: #2563eb !important;
  }

  /* Fix card shadows in light mode */
  .light .shadow-lg {
    --tw-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1) !important;
  }

  /* Hide scrollbar but keep scroll functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Truncate multi-line text */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}
